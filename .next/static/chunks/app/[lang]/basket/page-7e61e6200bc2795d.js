(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{7647:function(e,a,s){Promise.resolve().then(s.bind(s,1125))},1125:function(e,a,s){"use strict";s.d(a,{default:function(){return p}});var t=s(7437),r=s(2265),l=s(6648),n=e=>{let{options:a,name:s,selectedOption:r,onChange:l}=e;return(0,t.jsx)("div",{children:a.map(e=>(0,t.jsxs)("label",{className:"inline-flex items-center mb-2 border border-gray py-2 px-4 rounded-md mr-2",children:[(0,t.jsx)("input",{type:"radio",name:s,value:e.value,checked:r===e.value,onChange:e=>l(e.target.value),className:"form-radio h-4 w-4"}),(0,t.jsx)("span",{className:"ml-2",children:e.label})]},e.value))})},i=e=>{let{type:a,name:s,value:r,onChange:l,className:n,placeholder:i,error:d,required:o}=e;return(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("input",{type:a,id:s,name:s,value:r,onChange:e=>{let{target:a}=e;l({name:a.name,value:a.value})},className:n,placeholder:i,required:o}),d?(0,t.jsx)("div",{className:"h-5 text-red text-sm",children:d}):(0,t.jsx)("div",{className:"h-5",children:" "})]})},d=s(3514),o=s(2980),c=s(6668),u=s(1851),m=s(6463),p=e=>{let{lang:a,t:s}=e,p=(0,m.useRouter)(),h=(0,d.qr)(),x=(0,r.useRef)(!1);x.current||(h.dispatch((0,o.IT)()),h.dispatch((0,c.dw)()),x.current=!0);let g=(0,d.TL)(),{entity:b}=(0,d.CG)(e=>e.product),{error:f,auth:y,api:v,userId:j}=(0,d.CG)(e=>e.users),N=0===b.length?null:b[0],[w,k]=(0,r.useState)({name:"",email:"",mobile:"",street:"",city:"",postalCode:""}),[C,q]=(0,r.useState)({productId:"",quantity:1,deliveryPrice:0,total:0,userId:""}),[L,R]=(0,r.useState)({}),[S,I]=(0,r.useState)("Доставка по Казахстану"),[U,P]=(0,r.useState)(!1),[Z,O]=(0,r.useState)(""),E=[{value:"Доставка по Казахстану",label:"".concat(s.basket.deliveryLabel1)},{value:"Доставка международная",label:"".concat(s.basket.deliveryLabel2)}],A=e=>{k(a=>({...a,[e.name]:e.value}))},G=()=>{"Доставка по Казахстану"===S?q({...C,deliveryPrice:u.C2[0].price}):q({...C,deliveryPrice:u.C2[1].price*C.quantity})};(0,r.useEffect)(()=>{G()},[S,C.quantity]);let T={name:{isRequired:{message:"".concat(s.basket.errorName)}},email:{isRequired:{message:"".concat(s.basket.errorEmail)}},mobile:{max:{message:"".concat(s.basket.errorMobile),value:20},isContainDigit:{message:"".concat(s.basket.errorMobileCount)}}};(0,r.useEffect)(()=>{_()},[w]);let _=()=>{let e=function(e,a){let s={};for(let t in e)for(let r in a[t]){let l=function(e,a,s){let t;switch(e){case"isRequired":t="boolean"==typeof a?!a:""===a.trim();break;case"isEmail":t=!/^\S+@\S+\.\S+$/g.test(a);break;case"isCapitalSymbol":t=!/[A-Z]+/g.test(a);break;case"isContainDigit":t=!/\d+/g.test(a);break;case"min":t=a.length<s.value;break;case"max":t=a.length>s.value}if(t)return s.message}(r,e[t],a[t][r]);l&&!s[t]&&(s[t]=l)}return s}(w,T);return R(e),0===Object.keys(e).length},z=0===Object.keys(L).length,F=()=>P(!0),K=()=>P(!1);return(0,r.useEffect)(()=>{g((0,c.kG)({id:j}))},[y]),(0,t.jsx)("div",{className:"container mx-auto p-4  py-20",children:(0,t.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-5 md:gap-10 xl:px-40",children:[(0,t.jsxs)("div",{className:"w-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("h1",{className:"w-full text-2xl font-bold mb-6",children:s.basket.head}),(0,t.jsx)("div",{className:"mb-6 flex flex-row",children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-center bg-azure p-2",children:[(0,t.jsx)("div",{className:"block",children:N&&(0,t.jsx)(l.default,{src:null==N?void 0:N.imageUrl,width:100,height:100,alt:"alma-le"})}),(0,t.jsx)("p",{className:"flex font-bold px-1 col-span-2",children:null==N?void 0:N.name}),(0,t.jsx)("input",{name:"quantity",type:"number",className:"w-10 text-center border border-gray-300 focus:outline-none",value:Number(C.quantity),onChange:e=>{let{target:a}=e;q(e=>({...e,[a.name]:a.value}))},min:"1"}),(0,t.jsxs)("p",{className:"ml-2 font-bold px-1",children:[null==N?void 0:N.price," ",(0,t.jsx)("span",{className:"pl-2",children:"en"!==a?"тг":"t"})]})]}),(0,t.jsxs)("div",{className:"flex flex-row justify-between my-5",children:[(0,t.jsx)("p",{className:"font-bold",children:s.basket.delivery}),(0,t.jsxs)("p",{children:[C.deliveryPrice,(0,t.jsx)("span",{className:"pl-2",children:"en"!==a?"тг":"t"})]})]})]})})]}),(0,t.jsxs)("div",{className:"flex flex-row justify-between my-1 bottom-0",children:[(0,t.jsx)("p",{className:"font-bold text-lg",children:s.basket.total}),(0,t.jsxs)("p",{className:"font-bold",children:[C.quantity*(null==N?void 0:N.price)+C.deliveryPrice,(0,t.jsxs)("span",{className:"pl-2",children:[" ","en"!==a?"тг":"t (KZ)"]})]})]})]}),(0,t.jsx)("div",{className:"flex",children:(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:s.basket.delivery}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"flex flex-row",children:(0,t.jsx)(n,{options:E,name:"options",selectedOption:S,onChange:e=>{I(e)}})}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_()&&(g((0,c.y1)({name:w.name,email:w.email})),F())},children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{className:"block",children:s.basket.name}),(0,t.jsx)(i,{type:"text",name:"name",value:w.name,onChange:A,className:"w-full p-2 border border-gray",placeholder:"Нұрсултан Нұрсултан-ұлы",required:!0,error:L.name})]}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{className:"block",children:s.basket.email}),(0,t.jsx)(i,{type:"text",name:"email",value:w.email,onChange:A,className:"w-full p-2 border border-gray",placeholder:"email",error:L.email})]}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{className:"block",children:s.basket.phone}),(0,t.jsx)(i,{type:"text",name:"mobile",value:w.mobile,onChange:A,className:"w-full p-2 border border-gray",placeholder:"+77011234567",error:L.mobile})]}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{className:"block",children:s.basket.address}),(0,t.jsx)(i,{type:"text",name:"street",value:w.street,onChange:A,className:"w-full p-2 border border-gray",placeholder:"ул. Пушкина, дом 10, кв 28",error:L.street})]}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{className:"block",children:s.basket.city}),(0,t.jsx)(i,{type:"text",name:"city",value:w.city,onChange:A,className:"w-full p-2 border border-gray",placeholder:"Астана",error:L.city})]}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("label",{className:"block",children:s.basket.postIndex}),(0,t.jsx)(i,{type:"text",name:"postalCode",value:w.postalCode,onChange:A,className:"w-full p-2 border border-gray",placeholder:"101000",error:L.postalCode})]}),(0,t.jsx)("div",{className:"flex flex-row justify-end",children:(0,t.jsx)("button",{type:"submit",className:"bg-green text-white py-2 px-4 rounded-md hover:bg-green-light",disabled:!z,children:s.basket.button})})]})]})]})}),U&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:s.basket.head2}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g((0,c.Zu)({...w,code:Z})),O(""),K()},children:[(0,t.jsx)("input",{type:"number",value:Z,onChange:e=>{O(e.target.value)},className:"border border-gray-300 p-2 w-full mb-4",placeholder:"Введите код"}),(0,t.jsxs)("div",{className:"flex justify-end",children:[(0,t.jsx)("button",{type:"button",className:"border px-4 py-2 rounded-md mr-2 hover:bg-green-light hover:text-white",onClick:K,children:s.basket.buttonClose}),(0,t.jsx)("button",{type:"submit",className:"bg-green text-white px-4 py-2 rounded-md hover:bg-green-light",children:s.basket.buttonSend})]})]})]})}),"Unauthorize"===f&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:s.basket.headVerif}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"button",className:"border px-4 py-2 rounded-md mr-2 hover:bg-green-light hover:text-white",onClick:()=>g((0,c.sd)()),children:s.basket.buttonVerifyClose})})]})}),!0===y&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white md:px-6 m-2 py-6 rounded-lg shadow-lg max-w-md w-full text-center",children:[(0,t.jsxs)("div",{className:"flex flex-cols w-full items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4 mx-auto",children:s.basket.headKaspi}),(0,t.jsx)("div",{className:"flex w-20 h-20 bg-[url('/img/kaspi.png')] bg-contain bg-no-repeat mx-auto"})]}),(0,t.jsxs)("div",{className:"flex justify-center",children:[(0,t.jsx)("button",{className:"border px-4 py-2 rounded-md mr-2 hover:bg-green-light hover:text-white",onClick:()=>{g((0,c.pu)())},children:s.basket.buttonKaspiBack}),(0,t.jsx)("button",{onClick:e=>{e.preventDefault();let s=C.quantity*N.price+C.deliveryPrice;g((0,o.vE)({...C,total:s,productId:N._id,userId:j})),window.open("".concat(v)),g((0,c.pu)()),p.push("/".concat(a,"/#production"))},className:"border px-4 py-2 rounded-md mr-2 hover:bg-green-light hover:text-white",children:s.basket.buttonToKaspi})]})]})})]})})}},925:function(e,a,s){"use strict";var t=s(8472),r=s(5956),l=s(7258);t.Z.defaults.headers.common["Content-Type"]="application/json";let n=t.Z.create({baseURL:"http://localhost:3000/api"});n.interceptors.response.use(e=>{if(l.FG){var a;e.data={content:(a=e.data)&&!a._id?Object.keys(a).map(e=>({...a[e]})):a}}return e.data={content:e.data},e},function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log(e),r.Am.error("Something was wrong. Try it later")),Promise.reject(e)});let i={get:n.get,post:n.post,put:n.put,delete:n.delete,patch:n.patch};a.Z=i},3514:function(e,a,s){"use strict";s.d(a,{CG:function(){return l},TL:function(){return r},qr:function(){return n}});var t=s(1444);let r=t.I0.withTypes(),l=t.v9.withTypes(),n=t.oR.withTypes()},2980:function(e,a,s){"use strict";s.d(a,{ZP:function(){return m},IT:function(){return c},vE:function(){return u}});var t=s(1116),r=s(925),l={create:async e=>{console.log("payload",e);let{data:a}=await r.Z.post("/order",e);return console.log("dataorder",a),a}};let{reducer:n,actions:i}=(0,t.oM)({name:"orderRedux",initialState:{productOrder:{},send:!1,errorOrder:null},reducers:{loadOrderState:e=>{e.orderRedux},orderReceived:(e,a)=>{e.orderRedux=a.payload},orderRequestFailed(e,a){e.errorOrder=a.payload},orderUpdate:(e,a)=>{"send"===a.payload?e.send=!0:e.send=!1},updateOrderProduct(e,a){e.orderRedux=a.payload}}}),{loadOrderState:d,orderRequestFailed:o}=i,c=()=>async e=>{e(d())},u=e=>async a=>{console.log("orderslice",e);try{let{content:s}=await l.create(e);a(orderUpdate(s))}catch(e){a(o(e.message))}};var m=n},6668:function(e,a,s){"use strict";s.d(a,{pu:function(){return R},Zu:function(){return U},sd:function(){return S},ZP:function(){return Z},kG:function(){return P},dw:function(){return L},y1:function(){return I}});var t=s(1116),r=s(8472),l=s(7258);let n=r.Z.create({baseURL:l.Kp+"/auth/"});var i={verify:async e=>{let{data:a}=await n.post("verify",e);return a},verifyGet:async e=>{let{data:a}=await n.patch("verify",e);return a}},d=s(925);let o="/user/";var c={get:async()=>{let{data:e}=await d.Z.get(o);return e},getApi:async e=>{console.log("payload",e);let{data:a}=await d.Z.get(o+"getApi",{params:e});return console.lof("dataApi",a),a}};let{reducer:u,actions:m}=(0,t.oM)({name:"users",initialState:{entities:null,api:null,isLoading:!1,error:null,auth:!1,userId:null,isLoggedIn:!1,isVerify:!1},reducers:{usersInitialize:e=>{e.isLoading=!1},usersClearError:(e,a)=>{e.error=a.payload,e.isLoading=!1},usersRequested:e=>{e.isLoading=!0},userGetApi:(e,a)=>{e.api=a.payload,e.isLoading=!1},userUnauthorize:(e,a)=>{e.auth=a.payload.auth,e.userId=a.payload.userId,e.api=a.payload.api},usersReceived:(e,a)=>{e.entities=a.payload,e.isLoading=!1},usersRequestFailed:(e,a)=>{e.error=a.payload,e.isLoading=!1},authRequested:e=>{e.isLoading=!0},authRequestSuccess:(e,a)=>{e.auth=a.payload,e.isLoggedIn=!0},authRequestFailed:(e,a)=>{e.isLoggedIn=!1,e.error=a.payload},verifyRequestSend:e=>{e.error=null,e.isLoading=!1},verifyRequestFailed:(e,a)=>{e.error=a.payload,e.isLoading=!1},userCreated:(e,a)=>{Array.isArray(e.entities)||(e.entities=[]),null!==a.payload.user&&e.entities.push(a.payload.user),e.auth=a.payload.content,e.userId=a.payload.id,e.api=a.payload.api,e.isLoading=!1},userLoggedOut:e=>{e.entities=null,e.isLoggedIn=!1,e.isVerify=!1,e.auth=null},userUpdateSuccessed:(e,a)=>{e.entities[e.entities.findIndex(e=>e._id===a.payload._id)]=a.payload,e.isLoading=!1},authRequested:e=>{e.error=null}}}),{usersRequested:p,usersClearError:h,userCreated:x,usersReceived:g,usersRequestFailed:b,authRequestSuccess:f,authRequestFailed:y,userLoggedOut:v,userUpdateSuccessed:j,verifyRequestSend:N,verifyRequestFailed:w,userUnauthorize:k,userGetApi:C}=m,q=(0,t.PH)("users/authRequested");(0,t.PH)("users/userUpdateRequested"),(0,t.PH)("users/userUpdateFailed");let L=()=>async e=>{e(q());try{let{content:a}=await c.get();e(g(a))}catch(a){e(w(a.message))}},R=()=>async e=>{e(k({auth:!1,userId:null,api:null}))},S=()=>async e=>{e(q()),e(h(null))},I=e=>async a=>{a(q());try{let s=await i.verify(e);s.content,a(N(s))}catch(e){a(w(e.message))}},U=e=>async a=>{a(p());try{let s=await i.verifyGet(e);a(x(s))}catch(e){var s;a(w((null==e?void 0:null===(s=e.response.data)||void 0===s?void 0:s.message)?null==e?void 0:e.response.data.message:null==e?void 0:e.message))}},P=e=>async a=>{a(p());try{let{content:s}=await c.getApi(e);a(C(data.content))}catch(e){a(w(e.message))}};var Z=u},1851:function(e,a,s){"use strict";s.d(a,{C2:function(){return n},ZU:function(){return r},xn:function(){return l}});let t=[{id:1,name:"Аида",phone:"87756999475"},{id:2,name:"Фарида",phone:"87756989567"},{id:3,name:"Бандит",phone:"87756879475"},{id:4,name:"Глобус",phone:"87626999475"}],r=[{id:1,name:"Braun Depiero",buyer:t[0],profession:"chef",imageUrl:"/img/shef3.jpg",message:"I am delighted with the quality of Alma Le cookware!"},{id:2,name:"Федерико",buyer:t[1],profession:"шеф-повар",imageUrl:"/img/shef1.jpeg",message:"Я в восторге от качества посуды Alma Le"},{id:3,name:"Ernesto Kabale",buyer:t[2],profession:"шеф-повар",imageUrl:"/img/shef2.png",message:"Эта посуда нечто к хорошему привыкаешь быстро"}],l=[{id:1,name:"Индукционная плита",imageUrl:"/img/haracter/1.svg"},{id:2,name:"Газовая плита",imageUrl:"/img/haracter/2.svg"},{id:3,name:"Электрическая плита",imageUrl:"/img/haracter/3.svg"},{id:4,name:"Керамическая плита",imageUrl:"/img/haracter/4.svg"},{id:5,name:"Галогенная плита",imageUrl:"/img/haracter/5.svg"},{id:6,name:"Посудомоечная машина",imageUrl:"/img/haracter/6.svg"}],n=[{id:1,price:0},{id:2,price:2e4}]},7258:function(e){"use strict";e.exports=JSON.parse('{"Kp":"https://www.alma-le.com/api/ru","FG":false}')}},function(e){e.O(0,[648,444,682,486,971,23,744],function(){return e(e.s=7647)}),_N_E=e.O()}]);