"use strict";exports.id=438,exports.ids=[438],exports.modules={57438:(e,a,t)=>{t.r(a),t.d(a,{"00e31d5506a64b348d089bbf7094200bd7eef93fe6":()=>C,"604ef3b8550d7732efc07f402255b468e5dd8e1ffc":()=>x,"60c597d8e63894389779eed6ebdb6729b43ab9eb35":()=>v});var r=t(21590);t(70376);var n=t(16500);let i=n.z.object({mobile:n.z.string().min(11,{message:"Number must be at least 11 characters long."}).trim(),name:n.z.string().min(3,{message:"Name must be at least 2 characters long."}).trim(),email:n.z.string().email({message:"Please enter a valid email."}).trim(),password:n.z.string().min(8,{message:"Be at least 8 characters long"}).regex(/[a-zA-Z]/,{message:"Contain at least one letter."}).regex(/[0-9]/,{message:"Contain at least one number."}).regex(/[^a-zA-Z0-9]/,{message:"Contain at least one special character."}).trim()}),s=n.z.object({email:n.z.string().email({message:"Please enter a valid email."}).trim(),password:n.z.string().min(8,{message:"Be at least 8 characters long"}).regex(/[a-zA-Z]/,{message:"Contain at least one letter."}).regex(/[0-9]/,{message:"Contain at least one number."}).regex(/[^a-zA-Z0-9]/,{message:"Contain at least one special character."}).trim()});var o=t(23745),d=t.n(o),c=t(42385),p=t(20784);let l=process.env.SESSION_SECRET,f=new TextEncoder().encode(l);async function u(e){return new p.P(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("1d").sign(f)}async function g(e){let a=new Date(Date.now()+6048e5),t=await u({userId:e,expiresAt:a,role:"user"});(await (0,c.UL)()).set("session",t,{httpOnly:!0,secure:!0,expires:a,sameSite:"lax",path:"/"})}async function m(){(await (0,c.UL)()).delete("session")}var b=t(8805),y=t.n(b),w=t(56037),h=t.n(w),I=t(44548),k=t.n(I),z=t(99344);let S=!1,_=async()=>{if(S){console.log("Database is already connected");return}try{await h().set("strictQuery",!0),await h().connect(process.env.MONGODB_URI,{dbName:"test"},6e4),S=!0,console.log("Database connection established"),k()()}catch(e){throw console.error("Database connection error:",e),Error("Failed to connect to the database")}};(0,z.D)([_]),(0,r.A)(_,"7fe627b2d28f757b5190ef5df18a6d137f030859bd",null);var P=t(99184);async function v(e,a){await _();let t=!1;try{let r=i.safeParse({mobile:a.get("mobile"),name:a.get("name"),email:a.get("email"),password:a.get("password")});if(!r.success)return{errors:r.error.flatten().fieldErrors};let{mobile:n,name:s,email:o,password:c}=r.data,p=await d().findOne({email:o});if(console.log("exist",p),p)return{error:{message:"EMAIL_EXIST",code:400}};let l=["ru","kz","en"].find(a=>a===e);if(void 0===l)return{error:{message:"Clear errors",code:401}};let f=await y().hash(c,10),u=await d().create({mobile:n,name:s,email:o,password:f});if(!u)return{message:"An error occurred while creating your account."};await g(u._id),t=!0}catch(e){return console.error("Error during sign-up:",e),{error:{message:"Internal Server Error",code:500}}}finally{if(t){let a=`/${e}/basket`;(0,P.redirect)(a)}}}async function x(e,a){await _();let t=!1;try{let r=s.safeParse({email:a.get("email"),password:a.get("password")});if(!r.success)return{errors:r.error.flatten().fieldErrors};let{email:n,password:i}=r.data,o=await d().findOne({email:n});if(!o)return{error:{message:"EMAIL_EXIST",code:400}};if(!await y().compare(i,o.password))return{error:{message:"Invalid password.",code:401}};let c=["ru","kz","en"].find(a=>a===e);if(void 0===c)return{error:{message:"Clear errors",code:401}};await g(o._id),t=!0}catch(e){return console.error("Error during sign-up:",e),{error:{message:"Internal Server Error",code:500}}}finally{if(t){let a=`/${e}/basket`;(0,P.redirect)(a)}}}async function C(){m(),(0,P.redirect)("/")}(0,z.D)([v,x,C]),(0,r.A)(v,"60c597d8e63894389779eed6ebdb6729b43ab9eb35",null),(0,r.A)(x,"604ef3b8550d7732efc07f402255b468e5dd8e1ffc",null),(0,r.A)(C,"00e31d5506a64b348d089bbf7094200bd7eef93fe6",null)},44548:(e,a,t)=>{let r=t(50309),n=t(14453),i=t(58825),s=t(66530),o=t(79568),d=t(91936),c=t(20156),p=t(51171);async function l(e,a){return await e.collection.drop(),Promise.all(a.map(async a=>{try{delete a._id;let t=new e(a);return await t.save(),t}catch(e){return e}}))}async function f(e,a,t,r){return await e.collection.drop(),Promise.all(a.map(async(a,n)=>{try{delete a._id;let i=new e({...a,[t]:r[n]});if(a?.[t]!==r[n])return await i.save(),i}catch(e){return e}}))}e.exports=async()=>{(await r.find()).length!==o.length&&await l(r,o);let e=await n.find();if(e.length!==d.length&&await l(n,d),(await i.find()).length!==c.length){let a=e.map(e=>e._id);await f(i,c,"productId",a)}if((await s.find()).length!==p.length){let e=[];(await i.find()).map(a=>{e.push(a._id),e.push(a._id),e.push(a._id)}),await f(s,p,"productInfoId",e)}}},14453:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0});let r=t(56037),n=new r.Schema({imageUrl:{type:String,required:!0,maxLength:200},quantity:{type:Number},price:{type:Number}},{timestamps:!0});e.exports=r.models?.Product?r.models.Product:(0,r.model)("Product",n)},58825:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0});let r=t(56037),n=new r.Schema({productId:{type:String,required:!0},src:[{type:String}]},{timestamps:!0});e.exports=r.models?.ProductInfo?r.models.ProductInfo:(0,r.model)("ProductInfo",n)},66530:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0});let r=t(56037),n=new r.Schema({productInfoId:{type:String,required:!0},lang:{type:String,required:!0},meta:[{type:String}]},{timestamps:!0});e.exports=r.models?.ProductInfoTranslation?r.models.ProductInfoTranslation:(0,r.model)("ProductInfoTranslation",n)},50309:(e,a,t)=>{let r=t(56037),{Schema:n,model:i,models:s}=r;r.Promise=global.Promise;let o=new n({product:{type:n.Types.ObjectId,ref:"Product",required:!0},language:{type:String,enum:["kz","ru","en"],required:!0},name:{type:String,required:!0},title:{type:String},description:{type:String,required:!0},diameter:{type:String},size:{type:String},about:{type:String},keywords:{type:String},descriptionMeta:{type:String}});e.exports=s?.ProductTranslation?s.ProductTranslation:i("ProductTranslation",o)},23745:(e,a,t)=>{let{Schema:r,model:n,models:i}=t(56037),s=new r({name:{type:String,required:!0,minLength:3,maxLength:100},mobile:{type:String,required:!0,maxLength:30},email:{type:String,maxLength:200,required:!0},password:{type:String,required:!0,minLength:6}},{timestamps:!0}),o=i?.Users||n("Users",s);e.exports=o},91936:e=>{e.exports=JSON.parse('[{"id":"671f8ad851c70fa561f432e2","imageUrl":"/img/set/0.png","quantity":"500","price":"395000"},{"id":"671f8ad851c70fa561f432e3","imageUrl":"/img/pan35/0.png","quantity":"0","price":"0"},{"id":"671f8ad851c70fa561f432e5","imageUrl":"/img/pan6/0.png","quantity":"0","price":"0"},{"id":"671f8ad851c70fa561f432e6","imageUrl":"/img/fryingpan/01.png","quantity":"0","price":"0"},{"id":"671f8ad851c70fa561f432e4","imageUrl":"/img/sousepan/01.png","quantity":"0","price":"0"}]')},20156:e=>{e.exports=JSON.parse('[{"_id":"12","productId":"675a1528abab837f85c2555c","src":["/img/set/1.png","/img/set/2.png","/img/set/3.png","/img/set/4.png"]},{"_id":"13","productId":"675a1528abab837f85c25553","src":["/img/pan6/1.png","/img/pan6/2.png","/img/pan6/3.png","/img/pan6/4.png"]},{"_id":"14","productId":"675a1528abab837f85c25554","src":["/img/pan35/1.png","/img/pan35/2.png","/img/pan35/3.png","/img/pan35/4.png"]},{"_id":"15","productId":"675a1528abab837f85c25555","src":["/img/sousepan/1.png","/img/sousepan/2.png","/img/sousepan/3.png","/img/sousepan/4.png"]},{"_id":"16","productId":"675a1528abab837f85c25556","src":["/img/fryingpan/1.png","/img/fryingpan/2.png","/img/fryingpan/3.png","/img/fryingpan/4.png"]}]')},51171:e=>{e.exports=JSON.parse('[{"_id":"1","productInfoId":"675a1528abab837f85c2555c","lang":"ru","meta":["Набор медной посуды","Медная посуда","Подарок маме","Профессиональная посуда"]},{"_id":"01","productInfoId":"675a1528abab837f85c2555c","lang":"kz","meta":["Мыс ыдыс жиынтығы","Мыс ыдыс","Анаға сыйлық","Кәсіби ыдыс"]},{"_id":"011","productInfoId":"675a1528abab837f85c2555c","lang":"en","meta":["Copper utensil set","Copper utensils","Gift to mom","Professional glassware"]},{"_id":"2","productInfoId":"675a1528abab837f85c25552","lang":"ru","meta":["Кастрюля медная","Медная кастрюля","Кастрюля медь","Медные кастрюли"]},{"_id":"02","productInfoId":"675a1528abab837f85c25552","lang":"kz","meta":["Мыс кастрюль","Мыс кастрюль","Мыс кастрюль","Мыс кастрюльдер"]},{"_id":"022","productInfoId":"675a1528abab837f85c25552","lang":"en","meta":["Copper pan","Copper pan","Pot copper","Copper pots"]},{"_id":"3","productInfoId":"675a1528abab837f85c25551","lang":"ru","meta":["Медная кастрюля","Подарок жене","Профессиональная посуда","Кастрюля медная 6 литров"]},{"_id":"03","productInfoId":"675a1528abab837f85c25551","lang":"kz","meta":["Мыс кастрюль","Әйеліне сыйлық","Кәсіби ыдыс-аяқ","6 литр мыс кастрөл"]},{"_id":"033","productInfoId":"675a1528abab837f85c25551","lang":"en","meta":["Copper pan","Gift to wife","Professional tableware","Copper pot 6 liters"]},{"_id":"4","productInfoId":"675a1528abab837f85c25551","lang":"ru","meta":["Сотейник медный","Медная посуда","Медный сотейник","Сотейник в наборе"]},{"_id":"04","productInfoId":"675a1528abab837f85c25551","lang":"kz","meta":["Мыс ыдыс","Мыс ыдыс-аяқ","Мыс ыдыс","Жиынтықтағы ыдыс"]},{"_id":"044","productInfoId":"675a1528abab837f85c25551","lang":"en","meta":["Copper saut\xe9 pan","Copper dishes","Copper saut\xe9 pan","Saucepan in Set"]},{"_id":"5","productInfoId":"675a1528abab837f85c25556","lang":"ru","meta":["Сковорода медная","Медная сковорода","Сковорода сотейник медная","Антипригарная сковорода"]},{"_id":"05","productInfoId":"675a1528abab837f85c25556","lang":"kz","meta":["Мыс табасы","Мыс табасы","Мыс ыдыс табасы","Жапсырмайтын табасы"]},{"_id":"055","productInfoId":"675a1528abab837f85c25556","lang":"en","meta":["Copper frying pan","Copper frying pan","Copper saut\xe9 pan","Non-stick frying pan"]}]')},79568:e=>{e.exports=JSON.parse('[{"id":"671f8ad851c70fa561f432ec","product":"674a3cf6deec0f0dd2b22010","language":"kz","name":"Мыс ыдыс жиынтығы Alma Le 1.0","description":"Жинаққа сорпа мен кептірілген тағамдарды дайындауға арналған көлемі 6 литр кастрөл, қуыруға және сөндіруге арналған 3,6 литрлік таба, гарнирлер мен жармаларға арналған көлемі 3,5 литрлік кастрөл, сондай-ақ соустар мен құймаларға арналған көлемі 1,8 литрлік ыдыс кіреді","diameter":""},{"id":"671f8ad851c70fa561f432ed","product":"674a3cf6deec0f0dd2b22010","language":"ru","name":"Медный набор посуды Alma`Le 1.0","description":"Набор включает кастрюлю объемом 6 литров для приготовления супов и тушенных блюд, сковородку на 3,6 литра для жарки и тушения, кастрюлю на 3,5 литра для гарниров и круп, а также сотейник объемом 1,8 литра для соусов и подливок","diameter":""},{"id":"671f8ad851c70fa561f432ee","product":"674a3cf6deec0f0dd2b22010","language":"en","name":"Copper cookware set Alma Le 1.0","description":"The set includes a 6-litre pot for making soups and stews, a 3.6-litre pan for frying and stewing, a 3.5-litre pot for sides and cereals, and a 1.8-litre saut\xe9 pan for sauces and gravies","diameter":""},{"id":"671f8ad851c70fa561f432f0","product":"674a3cf6deec0f0dd2b22012","language":"kz","name":"6л кастрөл","description":"Қауіпсіз материалдардан жасалған. Плиталардың барлық түрлері үшін тамаша","diameter":"48 см","about":"Бұл әмбебап кастрюль күнделікті және күрделі тағамдарды дайындауға өте ыңғайлы. Оның үлкен көлемі барлық отбасыға немесе қонақтарға оңай дайындауға мүмкіндік береді.","size":"24*13.5 см","title":"Мыс кастрюль 6 литр | Қазақстанда сатып алу","keywords":"мыс кастрол, мыстан жасалған кастрюль, кастрюль, ас үй жабдықтары, мыс ыдыс-аяқ сатып алу","descriptionMeta":"Жоғары сапалы мыс кастрюль сатып алыңыз! Дайындауға, стильді дизайнға, ұзақ мерзімге арналған."},{"id":"671f8ad851c70fa561f432f1","product":"674a3cf6deec0f0dd2b22012","language":"ru","name":"Кастрюля 6л","description":"Изготовлена из безопасных материалов. Идеальна для всех типов плит","diameter":"48 см","about":"Эта универсальная кастрюля идеально подходит для приготовления как повседневных, так и более сложных блюд. Её большой объем позволяет легко готовить для всей семьи или гостей.","size":"24*13.5 см","title":"Медная кастрюля 6 литров | Купить в Казахстане","keywords":"медная кастрюля, кастрюли из меди, купить кастрюлю, кухонная утварь, медная посуда","descriptionMeta":"Купите медную кастрюлю высокого качества! Идеально для готовки, стильный дизайн, долговечность."},{"id":"671f8ad851c70fa561f432f2","product":"674a3cf6deec0f0dd2b22012","language":"en","name":"Pot 6l","description":"Made of safe materials. Ideal for all plate types","diameter":"48 cm","about":"This versatile saucepan is ideal for preparing both everyday and more complex dishes. Its large volume makes it easy to cook for the whole family or guests.","size":"24*13.5 cm","title":"Copper pot 6 liters | Buy in Kazakhstan","keywords":"copper pot, copper pots, buy pot, kitchen utensils, copper utensils","descriptionMeta":"Buy a high quality copper pan! Perfect for cooking, stylish design, durability."},{"id":"671f8ad851c70fa561f432f4","product":"674a3cf6deec0f0dd2b22011","language":"kz","name":"3,5 л кастрөл","description":"Қауіпсіз материалдардан жасалған. Плиталардың барлық түрлері үшін тамаша","diameter":"24 см","about":"Бұл кастрюль сорпалар, сорпалар, пасталар, пісірілген тағамдар, сондай-ақ джем мен варенье дайындауда сіздің маңызды көмекшіңіз болады.","size":"20*11.5 см","title":"Мыс кастрюль | Қазақстанда сатып алу","keywords":"мыс кастрюль, мыстан жасалған кастрюль, кастрюль, ас үй жабдықтары, мыс ыдыс-аяқ сатып алу","descriptionMeta":"Нағыз дайындықты бағалаушыларға арналған премиум-класс мыс кастрюльдер. Әрбір бөлшектегі экологиялық, жылу оқшаулағыш және сенімділік."},{"id":"671f8ad851c70fa561f432f5","product":"674a3cf6deec0f0dd2b22011","language":"ru","name":"Кастрюля 3,5 л","description":"Изготовлена из безопасных материалов. Идеальна для всех типов плит","diameter":"24 см","about":"Эта кастрюля станет вашим незаменимым помощником при приготовлении супов, бульонов, пасты, тушеных блюд, а также джемов и варенья.","size":"20*11.5 см","title":"Медная кастрюля | Купить в Казахстане","keywords":"медная кастрюля, кастрюли из меди, купить кастрюлю, кухонная утварь, медная посуда ","descriptionMeta":"Медная кастрюля премиум-класса для настоящих ценителей готовки. Экологичность, теплоизоляция и надежность в каждой детали."},{"id":"671f8ad851c70fa561f432f6","product":"674a3cf6deec0f0dd2b22011","language":"en","name":"Pan 3.5l","description":"Made of safe materials. Ideal for all plate types","diameter":"24 cm","about":"This pot will become your indispensable assistant when making soups, broths, pasta, stews, as well as jams and jam.","size":"24*11.5 cm","title":"Copper pan | Buy in Kazakhstan","keywords":"copper pan, copper pots, buy pot, kitchen utensils, copper utensils","descriptionMeta":"Premium copper pots for true cooking connoisseurs. Environmental friendliness, thermal insulation and reliability in every part."},{"id":"671f8ad951c70fa561f432f8","product":"674a3cf6deec0f0dd2b22013","language":"kz","name":"Таба 3,6 л","description":"Қауіпсіз материалдардан жасалған. Плиталардың барлық түрлері үшін тамаша","diameter":"32 см","about":"Бұл таба омлет, қуырылған балық, ет, көкөніс және т.б. дайындауға өте ыңғайлы.","size":"26*7 см","title":"Мыс таба Alma Le төмен бағамен сатып алу","keywords":"мыс табаны, мыстан жасалған табаны, ас үйге арналған табаны, сапалы табаны, жылу өткізгіштігін сатып алу","descriptionMeta":"Мыс табалар - кәсіпқойлар мен аспаздық әуесқойлар үшін тамаша таңдау. Біркелкі қыздыру, бірегей дизайн және ұзақ мерзімді. Мыс ыдыстың артықшылықтарын ашыңыз!"},{"id":"671f8ad951c70fa561f432f9","product":"674a3cf6deec0f0dd2b22013","language":"ru","name":"Сковорода 3,6 л","description":"Изготовлена из безопасных материалов. Идеальна для всех типов плит","diameter":"32 см","about":"Эта сковорода идеально подходит для приготовления омлетов, жареной рыбы, мяса, овощей и многого другого.","size":"26*7 см","title":"Сковорода медная купить на Alma Le","keywords":"медная сковорода, купить сковороду из меди, сковорода для кухни, качественные сковороды, теплопроводность сковороды","descriptionMeta":"Медная сковорода — идеальный выбор для профессионалов и любителей кулинарии. Равномерный нагрев, уникальный дизайн и долговечность. Откройте для себя преимущества медной посуды!"},{"id":"671f8ad951c70fa561f432fa","product":"674a3cf6deec0f0dd2b22013","language":"en","name":"Frying pan 3.6 l","description":"Made of safe materials. Ideal for all plate types","diameter":"32 cm","about":"This pan is perfect for making omelettes, fried fish, meat, vegetables and more.","size":"26*7 cm","title":"Copper pan buy on Alma Le at a low price","keywords":"copper pan, buy copper pan, kitchen pan, quality pans, heat conduction pan","descriptionMeta":"Copper pans are the perfect choice for professionals and culinary enthusiasts. Uniform heating, unique design and durability. Discover the benefits of copper utensils!"},{"id":"671f8ad951c70fa561f432fc","product":"674a3cf6deec0f0dd2b22014","language":"kz","name":"Сотейник 1,8 л","description":"Қауіпсіз материалдардан жасалған. Плиталардың барлық түрлері үшін тамаша","diameter":"24 см","about":"Соустар, таңертеңгі астау, конфитюр және джем дайындау үшін өте ыңғайлы.","size":"16*9.5 см","title":"Мыс ыдыс - Almale сатып алу | Мыс ыдыс тиімді бағамен, Қазақстан бойынша жеткізу","keywords":"мыс ыдыс, мыс ыдыс, ас үй ыдыс-аяғы, мыс таба, мыс кастрөл, ас үйге арналған ыдыс, қуыруға арналған ыдыс, мыс бұйымдары, шеф-аспазшыларға арналған ыдыс","descriptionMeta":"Мыс ыдыс - жоғары тағамдарды дайындау үшін кәсіби таңдау. Мінсіз жылыту, стильді дизайн және ұзақ мерзімді. Дайындығыңызды одан да жақсарыңыз!"},{"id":"671f8ad951c70fa561f432fd","product":"674a3cf6deec0f0dd2b22014","language":"ru","name":"Сотейник 1,8 л","description":"Изготовлен из безопасных материалов. Идеален для всех типов плит","diameter":"24 см","about":"Идеально подходит для приготовления соусов, каши на завтрак, конфитюров и джемов.","size":"16*9.5 см","title":"Медный сотейник – купить Almale | Медный сотейник по выгодным ценам, доставка по Казахстану","keywords":"медный сотейник, сотейник медный, медная посуда, кухонная посуда, сковорода медная, кастрюля медная, посуда для кухни, посуда для жарки, медные изделия, посуда для шеф-поваров","descriptionMeta":"Сотейник медный — профессиональный выбор для приготовления блюд высокой кухни. Идеальный нагрев, стильный дизайн и долговечность. Сделайте свою готовку ещё лучше!"},{"id":"671f8ad951c70fa561f432fe","product":"674a3cf6deec0f0dd2b22014","language":"en","name":"Saucepan 1.8l","description":"Made of safe materials. Ideal for all plate types","diameter":"24 cm","about":"Perfect for making sauces, porridge for breakfast, confiture and jams.","size":"16*9.5 сь","title":"Copper saucepan - buy Almale | Copper saucepan at competitive prices, delivery in Kazakhstan","keywords":"copper saut\xe9 pan, copper saut\xe9 pan, copper utensils, kitchen utensils, copper pan, copper pan, kitchen utensils, roasting utensils, copper products, chef\'s utensils","descriptionMeta":"Copper saucepans are a professional choice for cooking fine cuisine. Perfect heating, stylish design and durability. Make your cooking even better!"}]')}};