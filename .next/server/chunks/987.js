"use strict";exports.id=987,exports.ids=[987],exports.modules={8987:(e,a,t)=>{t.r(a),t.d(a,{"00e1920ca06c5168419fd5af21075798e5c997b688":()=>A,"60356b8a5a7f399fcc281b073f4708c31a3925a2cf":()=>q,"60c51eb0215d92840ff65f243c1b1d83d637e89510":()=>M});var r=t(21590);t(70376);var i=t(16500);let n=i.z.object({mobile:i.z.string().min(11,{message:"Number must be at least 11 characters long."}).trim(),name:i.z.string().min(3,{message:"Name must be at least 2 characters long."}).trim(),email:i.z.string().email({message:"Please enter a valid email."}).trim(),password:i.z.string().min(8,{message:"Be at least 8 characters long"}).regex(/[a-zA-Z]/,{message:"Contain at least one letter."}).regex(/[0-9]/,{message:"Contain at least one number."}).regex(/[^a-zA-Z0-9]/,{message:"Contain at least one special character."}).trim()}),s=i.z.object({email:i.z.string().email({message:"Please enter a valid email."}).trim(),password:i.z.string().min(8,{message:"Be at least 8 characters long"}).regex(/[a-zA-Z]/,{message:"Contain at least one letter."}).regex(/[0-9]/,{message:"Contain at least one number."}).regex(/[^a-zA-Z0-9]/,{message:"Contain at least one special character."}).trim()});var o=t(23745),d=t.n(o),c=t(42385),p=t(20784);let l=process.env.SESSION_SECRET,f=new TextEncoder().encode(l);async function u(e){return new p.P(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("1d").sign(f)}async function g(e){try{let a=new URL("http://localhost:3000/lib/api/session");a.searchParams.append("id",e);let t=await fetch(a.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!t.ok)throw Error("Ошибка при загрузке товаров");return await t.json()}catch(e){return console.error("Error fetching products:",e),[]}}async function m(e){let a=await g(e),t=a._id,r=new Date(a.expiresAt),i=await u({sessionId:t,userId:a.userId,expiresAt:r,role:a.role});(await (0,c.UL)()).set("session",i,{httpOnly:!0,secure:!0,expires:r,sameSite:"lax",path:"/"})}async function b(){(await (0,c.UL)()).delete("session")}var y=t(8805),h=t.n(y),w=t(99184),I=t(56037),k=t.n(I),S=t(44548),_=t.n(S),z=t(99344);let P=!1,x=async()=>{if(P){console.log("Database is already connected");return}try{await k().set("strictQuery",!0),await k().connect(process.env.MONGODB_URI,{dbName:"test"},6e4),P=!0,console.log("Database connection established"),_()()}catch(e){throw console.error("Database connection error:",e),Error("Failed to connect to the database")}};(0,z.D)([x]),(0,r.A)(x,"7ff7ac485ca25562c3848de5d6d696452198d1c729",null);var C=t(50608),v=t.n(C);async function M(e,a){await x();let t=n.safeParse({mobile:a.get("mobile"),name:a.get("name"),email:a.get("email"),password:a.get("password")});if(!t.success)return{errors:t.error.flatten().fieldErrors};let{mobile:r,name:i,email:s,password:o}=t.data;if(await d().findOne({email:s}))return{error:{message:"EMAIL_EXIST",code:400}};let c=await h().hash(o,10),p=await d().create({mobile:r,name:i,email:s,password:c});if(!p)return{message:"An error occurred while creating your account."};p&&(await m(p._id),(0,w.redirect)("/ru/basket"))}async function q(e,a){await x();let t=s.safeParse({email:a.get("email"),password:a.get("password")});if(!t.success)return{errors:t.error.flatten().fieldErrors};let{email:r,password:i}=t.data,n=await d().findOne({email:r});if(console.log("existinuser",n),!n)return{error:{message:"EMAIL_EXIST",code:400}};if(!await h().compare(i,n.password))return{error:{message:"Invalid email or password.",code:401}};let o=await v().findOne({userId:n._id});console.log("sessionfind",o),o&&await o.deleteOne(),await m(n._id),(0,w.redirect)("/ru/basket")}async function A(){b(),(0,w.redirect)("/login")}(0,z.D)([M,q,A]),(0,r.A)(M,"60c51eb0215d92840ff65f243c1b1d83d637e89510",null),(0,r.A)(q,"60356b8a5a7f399fcc281b073f4708c31a3925a2cf",null),(0,r.A)(A,"00e1920ca06c5168419fd5af21075798e5c997b688",null)},44548:(e,a,t)=>{let r=t(50309),i=t(14453),n=t(58825),s=t(66530),o=t(79568),d=t(91936),c=t(20156),p=t(51171);async function l(e,a){return await e.collection.drop(),Promise.all(a.map(async a=>{try{delete a._id;let t=new e(a);return await t.save(),t}catch(e){return e}}))}async function f(e,a,t,r){return await e.collection.drop(),Promise.all(a.map(async(a,i)=>{try{delete a._id;let n=new e({...a,[t]:r[i]});if(a?.[t]!==r[i])return await n.save(),n}catch(e){return e}}))}e.exports=async()=>{(await r.find()).length!==o.length&&await l(r,o);let e=await i.find();e.length!==d.length&&await l(i,d);let a=await n.find();if(console.log("1111",a.length,c.length),a.length!==c.length){let a=e.map(e=>e._id);console.log("list",a,a.length),await f(n,c,"productId",a)}if((await s.find()).length!==p.length){let e=[];(await n.find()).map(a=>{e.push(a._id),e.push(a._id),e.push(a._id)}),console.log("newList",e),await f(s,p,"productInfoId",e)}}},14453:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0});let r=t(56037),i=new r.Schema({imageUrl:{type:String,required:!0,maxLength:200},quantity:{type:Number},price:{type:Number}},{timestamps:!0});e.exports=r.models?.Product?r.models.Product:(0,r.model)("Product",i)},58825:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0});let r=t(56037),i=new r.Schema({productId:{type:String,required:!0},src:[{type:String}]},{timestamps:!0});e.exports=r.models?.ProductInfo?r.models.ProductInfo:(0,r.model)("ProductInfo",i)},66530:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0});let r=t(56037),i=new r.Schema({productInfoId:{type:String,required:!0},lang:{type:String,required:!0},meta:[{type:String}]},{timestamps:!0});e.exports=r.models?.ProductInfoTranslation?r.models.ProductInfoTranslation:(0,r.model)("ProductInfoTranslation",i)},50309:(e,a,t)=>{let r=t(56037),{Schema:i,model:n,models:s}=r;r.Promise=global.Promise;let o=new i({product:{type:i.Types.ObjectId,ref:"Product",required:!0},language:{type:String,enum:["kz","ru","en"],required:!0},name:{type:String,required:!0},title:{type:String},description:{type:String,required:!0},diameter:{type:String},size:{type:String},about:{type:String},keywords:{type:String},descriptionMeta:{type:String}});e.exports=s?.ProductTranslation?s.ProductTranslation:n("ProductTranslation",o)},50608:(e,a,t)=>{Object.defineProperty(a,"__esModule",{value:!0});let r=t(56037),i=new r.Schema({userId:{type:String,required:!0},expiresAt:{type:String,required:!0},role:{type:String,required:!0}},{timestamps:!0});e.exports=r.models?.Session?r.models.Session:(0,r.model)("Session",i)},23745:(e,a,t)=>{let{Schema:r,model:i,models:n}=t(56037),s=new r({name:{type:String,required:!0,minLength:3,maxLength:100},mobile:{type:String,required:!0,maxLength:30},email:{type:String,maxLength:200,required:!0},password:{type:String,required:!0,minLength:6}},{timestamps:!0}),o=n?.Users||i("Users",s);e.exports=o},91936:e=>{e.exports=JSON.parse('[{"id":"671f8ad851c70fa561f432e2","imageUrl":"/img/set/0.png","quantity":"500","price":"395000"},{"id":"671f8ad851c70fa561f432e3","imageUrl":"/img/pan35/0.png","quantity":"0","price":"0"},{"id":"671f8ad851c70fa561f432e5","imageUrl":"/img/pan6/0.png","quantity":"0","price":"0"},{"id":"671f8ad851c70fa561f432e6","imageUrl":"/img/fryingpan/01.png","quantity":"0","price":"0"},{"id":"671f8ad851c70fa561f432e4","imageUrl":"/img/sousepan/01.png","quantity":"0","price":"0"}]')},20156:e=>{e.exports=JSON.parse('[{"_id":"12","productId":"675a1528abab837f85c2555c","src":["/img/set/1.png","/img/set/2.png","/img/set/3.png","/img/set/4.png"]},{"_id":"13","productId":"675a1528abab837f85c25553","src":["/img/pan6/1.png","/img/pan6/2.png","/img/pan6/3.png","/img/pan6/4.png"]},{"_id":"14","productId":"675a1528abab837f85c25554","src":["/img/pan35/1.png","/img/pan35/2.png","/img/pan35/3.png","/img/pan35/4.png"]},{"_id":"15","productId":"675a1528abab837f85c25555","src":["/img/sousepan/1.png","/img/sousepan/2.png","/img/sousepan/3.png","/img/sousepan/4.png"]},{"_id":"16","productId":"675a1528abab837f85c25556","src":["/img/fryingpan/1.png","/img/fryingpan/2.png","/img/fryingpan/3.png","/img/fryingpan/4.png"]}]')},51171:e=>{e.exports=JSON.parse('[{"_id":"1","productInfoId":"675a1528abab837f85c2555c","lang":"ru","meta":["Набор медной посуды","Медная посуда","Подарок маме","Профессиональная посуда"]},{"_id":"01","productInfoId":"675a1528abab837f85c2555c","lang":"kz","meta":["Мыс ыдыс жиынтығы","Мыс ыдыс","Анаға сыйлық","Кәсіби ыдыс"]},{"_id":"011","productInfoId":"675a1528abab837f85c2555c","lang":"en","meta":["Copper utensil set","Copper utensils","Gift to mom","Professional glassware"]},{"_id":"2","productInfoId":"675a1528abab837f85c25552","lang":"ru","meta":["Кастрюля медная","Медная кастрюля","Кастрюля медь","Медные кастрюли"]},{"_id":"02","productInfoId":"675a1528abab837f85c25552","lang":"kz","meta":["Мыс кастрюль","Мыс кастрюль","Мыс кастрюль","Мыс кастрюльдер"]},{"_id":"022","productInfoId":"675a1528abab837f85c25552","lang":"en","meta":["Copper pan","Copper pan","Pot copper","Copper pots"]},{"_id":"3","productInfoId":"675a1528abab837f85c25551","lang":"ru","meta":["Медная кастрюля","Подарок жене","Профессиональная посуда","Кастрюля медная 6 литров"]},{"_id":"03","productInfoId":"675a1528abab837f85c25551","lang":"kz","meta":["Мыс кастрюль","Әйеліне сыйлық","Кәсіби ыдыс-аяқ","6 литр мыс кастрөл"]},{"_id":"033","productInfoId":"675a1528abab837f85c25551","lang":"en","meta":["Copper pan","Gift to wife","Professional tableware","Copper pot 6 liters"]},{"_id":"4","productInfoId":"675a1528abab837f85c25551","lang":"ru","meta":["Сотейник медный","Медная посуда","Медный сотейник","Сотейник в наборе"]},{"_id":"04","productInfoId":"675a1528abab837f85c25551","lang":"kz","meta":["Мыс ыдыс","Мыс ыдыс-аяқ","Мыс ыдыс","Жиынтықтағы ыдыс"]},{"_id":"044","productInfoId":"675a1528abab837f85c25551","lang":"en","meta":["Copper saut\xe9 pan","Copper dishes","Copper saut\xe9 pan","Saucepan in Set"]},{"_id":"5","productInfoId":"675a1528abab837f85c25556","lang":"ru","meta":["Сковорода медная","Медная сковорода","Сковорода сотейник медная","Антипригарная сковорода"]},{"_id":"05","productInfoId":"675a1528abab837f85c25556","lang":"kz","meta":["Мыс табасы","Мыс табасы","Мыс ыдыс табасы","Жапсырмайтын табасы"]},{"_id":"055","productInfoId":"675a1528abab837f85c25556","lang":"en","meta":["Copper frying pan","Copper frying pan","Copper saut\xe9 pan","Non-stick frying pan"]}]')},79568:e=>{e.exports=JSON.parse('[{"id":"671f8ad851c70fa561f432ec","product":"674a3cf6deec0f0dd2b22010","language":"kz","name":"Мыс ыдыс жиынтығы Alma Le 1.0","description":"Жинаққа сорпа мен кептірілген тағамдарды дайындауға арналған көлемі 6 литр кастрөл, қуыруға және сөндіруге арналған 3,6 литрлік таба, гарнирлер мен жармаларға арналған көлемі 3,5 литрлік кастрөл, сондай-ақ соустар мен құймаларға арналған көлемі 1,8 литрлік ыдыс кіреді","diameter":""},{"id":"671f8ad851c70fa561f432ed","product":"674a3cf6deec0f0dd2b22010","language":"ru","name":"Медный набор посуды Alma`Le 1.0","description":"Набор включает кастрюлю объемом 6 литров для приготовления супов и тушенных блюд, сковородку на 3,6 литра для жарки и тушения, кастрюлю на 3,5 литра для гарниров и круп, а также сотейник объемом 1,8 литра для соусов и подливок","diameter":""},{"id":"671f8ad851c70fa561f432ee","product":"674a3cf6deec0f0dd2b22010","language":"en","name":"Copper cookware set Alma Le 1.0","description":"The set includes a 6-litre pot for making soups and stews, a 3.6-litre pan for frying and stewing, a 3.5-litre pot for sides and cereals, and a 1.8-litre saut\xe9 pan for sauces and gravies","diameter":""},{"id":"671f8ad851c70fa561f432f0","product":"674a3cf6deec0f0dd2b22012","language":"kz","name":"6л кастрөл","description":"Қауіпсіз материалдардан жасалған. Плиталардың барлық түрлері үшін тамаша","diameter":"48 см","about":"Бұл әмбебап кастрюль күнделікті және күрделі тағамдарды дайындауға өте ыңғайлы. Оның үлкен көлемі барлық отбасыға немесе қонақтарға оңай дайындауға мүмкіндік береді.","size":"24*13.5 см","title":"Мыс кастрюль 6 литр | Қазақстанда сатып алу","keywords":"мыс кастрол, мыстан жасалған кастрюль, кастрюль, ас үй жабдықтары, мыс ыдыс-аяқ сатып алу","descriptionMeta":"Жоғары сапалы мыс кастрюль сатып алыңыз! Дайындауға, стильді дизайнға, ұзақ мерзімге арналған."},{"id":"671f8ad851c70fa561f432f1","product":"674a3cf6deec0f0dd2b22012","language":"ru","name":"Кастрюля 6л","description":"Изготовлена из безопасных материалов. Идеальна для всех типов плит","diameter":"48 см","about":"Эта универсальная кастрюля идеально подходит для приготовления как повседневных, так и более сложных блюд. Её большой объем позволяет легко готовить для всей семьи или гостей.","size":"24*13.5 см","title":"Медная кастрюля 6 литров | Купить в Казахстане","keywords":"медная кастрюля, кастрюли из меди, купить кастрюлю, кухонная утварь, медная посуда","descriptionMeta":"Купите медную кастрюлю высокого качества! Идеально для готовки, стильный дизайн, долговечность."},{"id":"671f8ad851c70fa561f432f2","product":"674a3cf6deec0f0dd2b22012","language":"en","name":"Pot 6l","description":"Made of safe materials. Ideal for all plate types","diameter":"48 cm","about":"This versatile saucepan is ideal for preparing both everyday and more complex dishes. Its large volume makes it easy to cook for the whole family or guests.","size":"24*13.5 cm","title":"Copper pot 6 liters | Buy in Kazakhstan","keywords":"copper pot, copper pots, buy pot, kitchen utensils, copper utensils","descriptionMeta":"Buy a high quality copper pan! Perfect for cooking, stylish design, durability."},{"id":"671f8ad851c70fa561f432f4","product":"674a3cf6deec0f0dd2b22011","language":"kz","name":"3,5 л кастрөл","description":"Қауіпсіз материалдардан жасалған. Плиталардың барлық түрлері үшін тамаша","diameter":"24 см","about":"Бұл кастрюль сорпалар, сорпалар, пасталар, пісірілген тағамдар, сондай-ақ джем мен варенье дайындауда сіздің маңызды көмекшіңіз болады.","size":"20*11.5 см","title":"Мыс кастрюль | Қазақстанда сатып алу","keywords":"мыс кастрюль, мыстан жасалған кастрюль, кастрюль, ас үй жабдықтары, мыс ыдыс-аяқ сатып алу","descriptionMeta":"Нағыз дайындықты бағалаушыларға арналған премиум-класс мыс кастрюльдер. Әрбір бөлшектегі экологиялық, жылу оқшаулағыш және сенімділік."},{"id":"671f8ad851c70fa561f432f5","product":"674a3cf6deec0f0dd2b22011","language":"ru","name":"Кастрюля 3,5 л","description":"Изготовлена из безопасных материалов. Идеальна для всех типов плит","diameter":"24 см","about":"Эта кастрюля станет вашим незаменимым помощником при приготовлении супов, бульонов, пасты, тушеных блюд, а также джемов и варенья.","size":"20*11.5 см","title":"Медная кастрюля | Купить в Казахстане","keywords":"медная кастрюля, кастрюли из меди, купить кастрюлю, кухонная утварь, медная посуда ","descriptionMeta":"Медная кастрюля премиум-класса для настоящих ценителей готовки. Экологичность, теплоизоляция и надежность в каждой детали."},{"id":"671f8ad851c70fa561f432f6","product":"674a3cf6deec0f0dd2b22011","language":"en","name":"Pan 3.5l","description":"Made of safe materials. Ideal for all plate types","diameter":"24 cm","about":"This pot will become your indispensable assistant when making soups, broths, pasta, stews, as well as jams and jam.","size":"24*11.5 cm","title":"Copper pan | Buy in Kazakhstan","keywords":"copper pan, copper pots, buy pot, kitchen utensils, copper utensils","descriptionMeta":"Premium copper pots for true cooking connoisseurs. Environmental friendliness, thermal insulation and reliability in every part."},{"id":"671f8ad951c70fa561f432f8","product":"674a3cf6deec0f0dd2b22013","language":"kz","name":"Таба 3,6 л","description":"Қауіпсіз материалдардан жасалған. Плиталардың барлық түрлері үшін тамаша","diameter":"32 см","about":"Бұл таба омлет, қуырылған балық, ет, көкөніс және т.б. дайындауға өте ыңғайлы.","size":"26*7 см","title":"Мыс таба Alma Le төмен бағамен сатып алу","keywords":"мыс табаны, мыстан жасалған табаны, ас үйге арналған табаны, сапалы табаны, жылу өткізгіштігін сатып алу","descriptionMeta":"Мыс табалар - кәсіпқойлар мен аспаздық әуесқойлар үшін тамаша таңдау. Біркелкі қыздыру, бірегей дизайн және ұзақ мерзімді. Мыс ыдыстың артықшылықтарын ашыңыз!"},{"id":"671f8ad951c70fa561f432f9","product":"674a3cf6deec0f0dd2b22013","language":"ru","name":"Сковорода 3,6 л","description":"Изготовлена из безопасных материалов. Идеальна для всех типов плит","diameter":"32 см","about":"Эта сковорода идеально подходит для приготовления омлетов, жареной рыбы, мяса, овощей и многого другого.","size":"26*7 см","title":"Сковорода медная купить на Alma Le","keywords":"медная сковорода, купить сковороду из меди, сковорода для кухни, качественные сковороды, теплопроводность сковороды","descriptionMeta":"Медная сковорода — идеальный выбор для профессионалов и любителей кулинарии. Равномерный нагрев, уникальный дизайн и долговечность. Откройте для себя преимущества медной посуды!"},{"id":"671f8ad951c70fa561f432fa","product":"674a3cf6deec0f0dd2b22013","language":"en","name":"Frying pan 3.6 l","description":"Made of safe materials. Ideal for all plate types","diameter":"32 cm","about":"This pan is perfect for making omelettes, fried fish, meat, vegetables and more.","size":"26*7 cm","title":"Copper pan buy on Alma Le at a low price","keywords":"copper pan, buy copper pan, kitchen pan, quality pans, heat conduction pan","descriptionMeta":"Copper pans are the perfect choice for professionals and culinary enthusiasts. Uniform heating, unique design and durability. Discover the benefits of copper utensils!"},{"id":"671f8ad951c70fa561f432fc","product":"674a3cf6deec0f0dd2b22014","language":"kz","name":"Сотейник 1,8 л","description":"Қауіпсіз материалдардан жасалған. Плиталардың барлық түрлері үшін тамаша","diameter":"24 см","about":"Соустар, таңертеңгі астау, конфитюр және джем дайындау үшін өте ыңғайлы.","size":"16*9.5 см","title":"Мыс ыдыс - Almale сатып алу | Мыс ыдыс тиімді бағамен, Қазақстан бойынша жеткізу","keywords":"мыс ыдыс, мыс ыдыс, ас үй ыдыс-аяғы, мыс таба, мыс кастрөл, ас үйге арналған ыдыс, қуыруға арналған ыдыс, мыс бұйымдары, шеф-аспазшыларға арналған ыдыс","descriptionMeta":"Мыс ыдыс - жоғары тағамдарды дайындау үшін кәсіби таңдау. Мінсіз жылыту, стильді дизайн және ұзақ мерзімді. Дайындығыңызды одан да жақсарыңыз!"},{"id":"671f8ad951c70fa561f432fd","product":"674a3cf6deec0f0dd2b22014","language":"ru","name":"Сотейник 1,8 л","description":"Изготовлен из безопасных материалов. Идеален для всех типов плит","diameter":"24 см","about":"Идеально подходит для приготовления соусов, каши на завтрак, конфитюров и джемов.","size":"16*9.5 см","title":"Медный сотейник – купить Almale | Медный сотейник по выгодным ценам, доставка по Казахстану","keywords":"медный сотейник, сотейник медный, медная посуда, кухонная посуда, сковорода медная, кастрюля медная, посуда для кухни, посуда для жарки, медные изделия, посуда для шеф-поваров","descriptionMeta":"Сотейник медный — профессиональный выбор для приготовления блюд высокой кухни. Идеальный нагрев, стильный дизайн и долговечность. Сделайте свою готовку ещё лучше!"},{"id":"671f8ad951c70fa561f432fe","product":"674a3cf6deec0f0dd2b22014","language":"en","name":"Saucepan 1.8l","description":"Made of safe materials. Ideal for all plate types","diameter":"24 cm","about":"Perfect for making sauces, porridge for breakfast, confiture and jams.","size":"16*9.5 сь","title":"Copper saucepan - buy Almale | Copper saucepan at competitive prices, delivery in Kazakhstan","keywords":"copper saut\xe9 pan, copper saut\xe9 pan, copper utensils, kitchen utensils, copper pan, copper pan, kitchen utensils, roasting utensils, copper products, chef\'s utensils","descriptionMeta":"Copper saucepans are a professional choice for cooking fine cuisine. Perfect heating, stylish design and durability. Make your cooking even better!"}]')}};