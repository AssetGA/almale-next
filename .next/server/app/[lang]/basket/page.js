(()=>{var e={};e.id=598,e.ids=[598],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},63654:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=t(70260),a=t(28203),l=t(25155),i=t.n(l),n=t(67292),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["[lang]",{children:["basket",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,59809)),"/home/asset/projects/almale/almale-next/src/app/[lang]/basket/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3740)),"/home/asset/projects/almale/almale-next/src/app/[lang]/layout.js"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["/home/asset/projects/almale/almale-next/src/app/[lang]/basket/page.js"],m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/[lang]/basket/page",pathname:"/[lang]/basket",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1047:(e,s,t)=>{"use strict";t.r(s),t.d(s,{"7fe627b2d28f757b5190ef5df18a6d137f030859bd":()=>r.$});var r=t(62370)},729:(e,s,t)=>{Promise.resolve().then(t.bind(t,87221))},13881:(e,s,t)=>{Promise.resolve().then(t.bind(t,20384))},20384:(e,s,t)=>{"use strict";t.d(s,{default:()=>b});var r=t(45512),a=t(58009),l=t(45103);let i=({options:e,name:s,selectedOption:t,onChange:a})=>(0,r.jsx)("div",{children:e.map(e=>(0,r.jsxs)("label",{className:"inline-flex items-center mb-2 border border-gray py-2 px-4 rounded-md mr-2",children:[(0,r.jsx)("input",{type:"radio",name:s,value:e.value,checked:t===e.value,onChange:e=>a(e.target.value),className:"form-radio h-4 w-4"}),(0,r.jsx)("span",{className:"ml-2",children:e.label})]},e.value))}),n=({type:e,name:s,value:t,onChange:a,className:l,placeholder:i,error:n,required:o})=>(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("input",{type:e,id:s,name:s,value:t,onChange:({target:e})=>{a({name:e.name,value:e.value})},className:l,placeholder:i,required:o}),n?(0,r.jsx)("div",{className:"h-5 text-red text-sm",children:n}):(0,r.jsx)("div",{className:"h-5",children:" "})]});var o=t(35294),d=t(63577),c=t(89572),m=t(41410),u=t(79334),p=t(26248);let x=(0,p.createServerReference)("00e31d5506a64b348d089bbf7094200bd7eef93fe6",p.callServer,void 0,p.findSourceMapURL,"logout"),b=({lang:e,t:s})=>{let t=(0,u.useRouter)(),p=(0,o.CU)(),b=(0,a.useRef)(!1);b.current||(p.dispatch((0,d.NV)()),p.dispatch((0,c.Z5)()),p.dispatch((0,c.e9)()),b.current=!0);let h=(0,o.jL)(),{entity:g}=(0,o.GV)(e=>e.product),{error:f,isVerify:v,api:j,userId:y}=(0,o.GV)(e=>e.user),{productOrder:N,errorOrder:k}=(0,o.GV)(e=>e.order),w=g.length>0&&g.find(e=>"671f8ad851c70fa561f432e2"===e._id||"675a1528abab837f85c2555c"===e._id),[q,C]=(0,a.useState)({name:"",email:"",mobile:"",street:"",city:"",postalCode:""}),[P,_]=(0,a.useState)({productId:"",quantity:1,deliveryPrice:0,total:0,userId:""}),[S,U]=(0,a.useState)({}),[$,z]=(0,a.useState)("Доставка по Казахстану"),[I,A]=(0,a.useState)(!1),[E,R]=(0,a.useState)(""),G=[{value:"Доставка по Казахстану",label:`${s.basket.deliveryLabel1}`},{value:"Доставка международная",label:`${s.basket.deliveryLabel2}`}],V=e=>{C(s=>({...s,[e.name]:e.value}))},D=()=>{"Доставка по Казахстану"===$?_({...P,deliveryPrice:m.$z[0].price}):_({...P,deliveryPrice:m.$z[1].price*P.quantity})};(0,a.useEffect)(()=>{D()},[$,P.quantity]);let L={name:{isRequired:{message:`${s.basket.errorName}`}},email:{isRequired:{message:`${s.basket.errorEmail}`}},mobile:{max:{message:`${s.basket.errorMobile}`,value:20},isContainDigit:{message:`${s.basket.errorMobileCount}`}}};(0,a.useEffect)(()=>{K()},[q]);let K=()=>{let e=function(e,s){let t={};for(let r in e)for(let a in s[r]){let l=function(e,s,t){let r;switch(e){case"isRequired":r="boolean"==typeof s?!s:""===s.trim();break;case"isEmail":r=!/^\S+@\S+\.\S+$/g.test(s);break;case"isCapitalSymbol":r=!/[A-Z]+/g.test(s);break;case"isContainDigit":r=!/\d+/g.test(s);break;case"min":r=s.length<t.value;break;case"max":r=s.length>t.value}if(r)return t.message}(a,e[r],s[r][a]);l&&!t[r]&&(t[r]=l)}return t}(q,L);return U(e),0===Object.keys(e).length},M=0===Object.keys(S).length,T=()=>A(!0),B=()=>A(!1);return(0,r.jsx)("div",{className:"container mx-auto p-4  py-20",children:(0,r.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-5 md:gap-10 xl:px-40",children:[(0,r.jsxs)("div",{className:"w-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h1",{className:"w-full text-2xl font-bold mb-6",children:s.basket.head}),(0,r.jsx)("div",{className:"mb-6 flex flex-row",children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center bg-azure p-2",children:[(0,r.jsx)("div",{className:"block",children:w&&(0,r.jsx)(l.default,{src:w?.imageUrl,width:100,height:100,alt:s.metadataProduct.title,priority:!0})}),(0,r.jsx)("p",{className:"flex font-bold px-1 col-span-2",children:w?.name}),(0,r.jsx)("input",{name:"quantity",type:"number",className:"w-10 text-center border border-gray-300 focus:outline-none",value:Number(P.quantity),onChange:({target:e})=>{_(s=>({...s,[e.name]:e.value}))},min:"1"}),(0,r.jsxs)("p",{className:"ml-2 font-bold px-1",children:[w?.price,(0,r.jsx)("span",{className:"pl-2",children:"en"!==e?"тг":"t"})]})]}),(0,r.jsxs)("div",{className:"flex flex-row justify-between my-5",children:[(0,r.jsx)("p",{className:"font-bold",children:s.basket.delivery}),(0,r.jsxs)("p",{children:[P.deliveryPrice,(0,r.jsx)("span",{className:"pl-2",children:"en"!==e?"тг":"t"})]})]})]})})]}),(0,r.jsxs)("div",{className:"flex flex-row justify-between my-1 bottom-0",children:[(0,r.jsx)("p",{className:"font-bold text-lg",children:s.basket.total}),(0,r.jsxs)("p",{className:"font-bold",children:[P.quantity*w?.price+P.deliveryPrice,(0,r.jsxs)("span",{className:"pl-2",children:[" ","en"!==e?"тг":"t (KZ)"]})]})]})]}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:s.basket.delivery}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"flex flex-row",children:(0,r.jsx)(i,{options:G,name:"options",selectedOption:$,onChange:e=>{z(e)}})}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!K())return;let s=P.quantity*w.price+P.deliveryPrice;h((0,d.Jx)({...P,...q,total:s,productId:w._id,userId:y})),C({name:"",email:"",mobile:"",street:"",city:"",postalCode:""}),_({productId:"",quantity:1,deliveryPrice:0,total:0,userId:""}),T()},children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("label",{className:"block",children:s.basket.name}),(0,r.jsx)(n,{type:"text",name:"name",value:q.name,onChange:V,className:"w-full p-2 border border-gray",placeholder:"Нұрсултан Нұрсултан-ұлы",required:!0,error:S.name})]}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("label",{className:"block",children:s.basket.email}),(0,r.jsx)(n,{type:"text",name:"email",value:q.email,onChange:V,className:"w-full p-2 border border-gray",placeholder:"email",error:S.email})]}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("label",{className:"block",children:s.basket.phone}),(0,r.jsx)(n,{type:"text",name:"mobile",value:q.mobile,onChange:V,className:"w-full p-2 border border-gray",placeholder:"+77011234567",error:S.mobile})]}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("label",{className:"block",children:s.basket.address}),(0,r.jsx)(n,{type:"text",name:"street",value:q.street,onChange:V,className:"w-full p-2 border border-gray",placeholder:"ул. Пушкина, дом 10, кв 28",error:S.street})]}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("label",{className:"block",children:s.basket.city}),(0,r.jsx)(n,{type:"text",name:"city",value:q.city,onChange:V,className:"w-full p-2 border border-gray",placeholder:"Астана",error:S.city})]}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("label",{className:"block",children:s.basket.postIndex}),(0,r.jsx)(n,{type:"text",name:"postalCode",value:q.postalCode,onChange:V,className:"w-full p-2 border border-gray",placeholder:"101000",error:S.postalCode})]}),(0,r.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,r.jsx)("button",{className:"bg-green text-white py-2 px-4 rounded-md hover:bg-green-light",onClick:x,children:s.basket.logout}),(0,r.jsx)("button",{type:"submit",className:"bg-green text-white py-2 px-4 rounded-md hover:bg-green-light",disabled:!M,children:s.basket.button})]})]})]})]})}),I&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:s.basket.head2}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h((0,c.of)({code:E,orderId:N})),R(""),B()},children:[(0,r.jsx)("input",{type:"number",value:E,onChange:e=>{R(e.target.value)},className:"border border-gray-300 p-2 w-full mb-4",placeholder:"Введите код"}),(0,r.jsxs)("div",{className:"flex justify-end",children:[(0,r.jsx)("button",{type:"button",className:"border px-4 py-2 rounded-md mr-2 hover:bg-green-light hover:text-white",onClick:B,children:s.basket.buttonClose}),(0,r.jsx)("button",{type:"submit",className:"bg-green text-white px-4 py-2 rounded-md hover:bg-green-light",children:s.basket.buttonSend})]})]})]})}),("Unauthorize"===f||"No Verify"===f)&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:s.basket.headVerif}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"button",className:"border px-4 py-2 rounded-md mr-2 hover:bg-green-light hover:text-white",onClick:()=>h((0,c.qs)()),children:s.basket.buttonVerifyClose})})]})}),!0===v&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white md:px-6 m-2 py-6 rounded-lg shadow-lg max-w-md w-full text-center",children:[(0,r.jsxs)("div",{className:"flex flex-cols w-full items-center",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 mx-auto",children:s.basket.headKaspi}),(0,r.jsx)("div",{className:"flex w-20 h-20 bg-[url('/img/kaspi.png')] bg-contain bg-no-repeat mx-auto"})]}),(0,r.jsxs)("div",{className:"flex justify-center",children:[(0,r.jsx)("button",{className:"border px-4 py-2 rounded-md mr-2 hover:bg-green-light hover:text-white",onClick:()=>{h((0,c.n4)()),h((0,d.t3)(N))},children:s.basket.buttonKaspiBack}),(0,r.jsx)("button",{onClick:s=>{s.preventDefault(),window.open(`${j}`),t.push(`/${e}/payment`),h((0,c.n4)())},className:"border px-4 py-2 rounded-md mr-2 hover:bg-green-light hover:text-white",children:s.basket.buttonToKaspi})]})]})})]})})}},35294:(e,s,t)=>{"use strict";t.d(s,{CU:()=>i,GV:()=>l,jL:()=>a});var r=t(92273);let a=r.wA.withTypes(),l=r.d4.withTypes(),i=r.Pj.withTypes()},41410:(e,s,t)=>{"use strict";t.d(s,{$z:()=>i,Qg:()=>a,z8:()=>l});let r=[{id:1,name:"Аида",phone:"87756999475"},{id:2,name:"Фарида",phone:"87756989567"},{id:3,name:"Бандит",phone:"87756879475"},{id:4,name:"Глобус",phone:"87626999475"}],a=[{id:1,name:"Braun Depiero",buyer:r[0],profession:"chef",imageUrl:"/img/shef3.jpg",message:"I am delighted with the quality of Alma Le cookware!"},{id:2,name:"Федерико",buyer:r[1],profession:"шеф-повар",imageUrl:"/img/shef1.jpeg",message:"Я в восторге от качества посуды Alma Le"},{id:3,name:"Ernesto Kabale",buyer:r[2],profession:"шеф-повар",imageUrl:"/img/shef2.png",message:"Эта посуда нечто к хорошему привыкаешь быстро"}],l=[{id:1,name:"Индукционная плита",imageUrl:"/img/haracter/1.svg"},{id:2,name:"Газовая плита",imageUrl:"/img/haracter/2.svg"},{id:3,name:"Электрическая плита",imageUrl:"/img/haracter/3.svg"},{id:4,name:"Керамическая плита",imageUrl:"/img/haracter/4.svg"},{id:5,name:"Галогенная плита",imageUrl:"/img/haracter/5.svg"},{id:6,name:"Посудомоечная машина",imageUrl:"/img/haracter/6.svg"}],i=[{id:1,price:0},{id:2,price:2e4}]},59809:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(62740),a=t(87221),l=t(2193),i=t(85577),n=t(31831);let o=async({params:e})=>{let{lang:s}=await e,t=await (0,l.T)(s),o=await (0,i.g)(),d=o.role;return"admin"===d?(0,r.jsx)(AdminDashboard,{}):"user"===d&&o.userId?(0,r.jsx)(a.default,{lang:s,t:t}):void(0,n.redirect)("/login")}},87221:(e,s,t)=>{"use strict";t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/asset/projects/almale/almale-next/src/app/components/Basket.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/asset/projects/almale/almale-next/src/app/components/Basket.jsx","default")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[994,410,192,403,450,776,544,577,688,438],()=>t(63654));module.exports=r})();